<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>home</title>
    <script type="application/javascript" src="../js/bootstrap.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@200;300;400;500;600;700;800;900&display=swap"
        rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
        integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <!-- Bootstrap-->
    <link href="../styles/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

    <!-- <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script> -->
    <link rel="stylesheet" href="../styles/index.css">
    <link rel="stylesheet" href="../styles/responsive.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>




    <div class="row " dir="rtl">
        <div class="container  col-11" style="background-color:transparent;">
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item "><a href="/">الرئيسيه</a></li>
                    <li class="breadcrumb-item"><a href="#">### </a></li>
                </ol>
            </nav>
        </div>
    </div>
    <div class="row ">
        <div class="container welcome col-11">
            <div class="d-flex justify-content-between">
                <p> مرحبا بك سوبر ادمن </p>


            </div>
        </div>
    </div>
    <br>

    <div class="row">
        <div class="container  col-11 mt-3 p-0 " style=" background-color: transparent;">
            <div class="row col-12 d-flex  ">


                <div class="col-md-3 col-sm-12 col-12  d-block" dir="rtl">
                    <div class=" graph-card" style="background-color: #ffffff;">


                        <div class="d-flex">
                            <i class="fa-solid fa-user-group" style="color: #8E52B1;"></i>
                            <h2 class="mx-3">الادارات</h2>
                        </div>
                        <h1>20</h1>
                    </div>
                </div>
                <div class="col-md-3 col-sm-12 col-12  d-block" dir="rtl">
                    <div class=" graph-card" style="background-color: #ffffff;">


                        <div class="d-flex">
                            <i class="fa-solid fa-user-group" style="color: #28A39C"></i>
                            <h2 class="mx-3">المجموعات</h2>
                        </div>
                        <h1>5</h1>
                    </div>
                </div>
                <div class="col-md-3 col-sm-12 col-12  d-block" dir="rtl">
                    <div class=" graph-card" style="background-color: #ffffff;">


                        <div class="d-flex">
                            <i class="fa-solid fa-user-group" style="color: #8E52B1;"></i>
                            <h2 class="mx-3">اجمالى المستخدمين</h2>
                        </div>
                        <h1>102</h1>
                    </div>
                </div>

                <div class="col-md-3 col-sm-12 col-12  d-block" dir="rtl">
                    <div class=" graph-card" style="background-color: #ffffff;">


                        <div class="d-flex">
                            <i class="fa-solid fa-user-group" style="color:   #F7AF15;"></i>
                            <h2 class="mx-3">اجمالى الموظفين</h2>
                        </div>
                        <h1>1233</h1>
                    </div>
                </div>
            </div>
            <div class="row col-12 d-flex  ">

                <div class="col-md-3 col-sm-12 col-12  d-block" dir="rtl">
                    <div class=" graph-card" style="background-color: #ffffff;">


                        <div class="d-flex">
                            <i class="fa-solid fa-user-group" style="color: #8E52B1;"></i>
                            <h2 class="mx-3">الوارد</h2>
                        </div>
                        <h1>102</h1>
                    </div>
                </div>

                <div class="col-md-3 col-sm-12 col-12  d-block" dir="rtl">
                    <div class=" graph-card" style="background-color: #ffffff;">


                        <div class="d-flex">
                            <i class="fa-solid fa-user-group" style="color: #F7AF15;"></i>
                            <h2 class="mx-3">الصادر</h2>
                        </div>
                        <h1>102</h1>
                    </div>
                </div>
                <div class="col-md-3 col-sm-12 col-12  d-block" dir="rtl">
                    <div class=" graph-card" style="background-color: #ffffff;">


                        <div class="d-flex">
                            <i class="fa-solid fa-user-group" style="color: #259240;"></i>
                            <h2 class="mx-3">اوامر الخدمة</h2>
                        </div>
                        <h1>40</h1>
                    </div>
                </div>
                <div class="col-md-3 col-sm-12 col-12  d-block" dir="rtl">
                    <div class=" graph-card" style="background-color: #ffffff;">


                        <div class="d-flex">
                            <i class="fa-solid fa-user-group" style="color: #259240;"></i>
                            <h2 class="mx-3">الاجازات</h2>
                        </div>
                        <h1>14</h1>
                    </div>
                </div>

            </div>
        </div>
    </div>
    
    <div class="row desktop-view">
        <div class="container col-11 mt-3 p-0 d-flex" style="background-color: transparent;" dir="rtl">
            <!-- First Card -->
            <div class=" col-12  circle-graph-card " style="background-color: #ffffff;">
                <div class="">
                   <div class=" d-flex justify-content-between">
                    <div class="d-flex ">
                        <img src="../images/report.svg" alt="">
                            <h2 class="col-12 h2-charts mb-3" style="text-align: right;">تقرير شهر اغسطس</h2>
                        </div>
                        <select id="month" class="month" name="month">
                            <option value="">شهر يناير</option>
                            <option value=""> شهر فبراير</option>
                            <option value="">شهر مارس</option>
                            <option value="">شهر ابريل</option>
                        </select>
                   </div>
                    <!-- Second Row: Pie Chart and Info -->
                    <div class="row">
                        <div class="col-md-6  col-sm-12 col-12 d-flex">

                            <div class="d-block col-md-12 col-sm-12 col-12 mt-5">
                                <div class="d-flex mb-3 ">
                                    <div class="color" style="background-color: #aa1717;"></div>
                                    <h2 class="info col-5 " id="info1"> عدد المخالفات</h2>
                                    <h2 class="h2 mx-5">{{ $violations }}</h2>
                                </div>
                                <div class="d-flex mb-3">
                                    <div class="color " style="background-color: #f8a723;"></div>
                                    <h2 class="info col-5" id="info1">  عدد الزيارات </h2>
                                    <h2 class="h2 mx-5 ">{{ $points }}</h2>
                                </div>
                                <div class="d-flex mb-3">
                                    <div class="color" style="background-color: #274373;"></div>
                                    <h2 class="info col-5" id="info1"> عدد المفتشين</h2>
                                    <h2 class="h2 mx-5">{{ $inspectors }}</h2>
                                </div>
                            </div>
                            <canvas id="myPieChart" width="150" height="90" class="mt-2"></canvas>
                        </div>
                    </div>
                </div>
            </div>

          
        </div>
    </div>

    <div class="row desktop-view">
        <div class="container col-11 mt-3 p-0 d-flex" style="background-color: transparent;" dir="rtl">
    <div class=" col-12  canvas-card " style="background-color: #ffffff;">
        <div class=" d-flex">
            <i class="fa-solid fa-user-group" style="color: #8E52B1;"></i>
            <h2 class="mx-3 h2-charts mb-4" style="text-align: right;">احصائيات المستخدمين والموظفين خلال ثلاث
                اشهر</h2>
        </div>
        <canvas id="barChart" style="width:100%;max-width:600px;"></canvas>
        <div class="d-flex col-md-8 col-sm-12 col-12 mt-3">
            <div class="color"></div>
            <h2 class="info  " id="info1"> مستخدم</h2>
            <h2 class="h2 mx-5">890</h2>
        </div>
        <div class="d-flex col-md-8 col-sm-12 col-12">
            <div class="color"></div>
            <h2 class="info " id="info1"> موظف</h2>
            <h2 class=" h2 mx-5">890</h2>
        </div>
    </div>
             
</div>
</div>
 <div class=" row mobile-view ">
   <div class=" container col-11 d-flex justify-content-between" style="background-color: transparent;">
    <div class="  col-12  " style="background-color: #ffffff; border-radius: 20px;" dir="rtl">
            <div class="d-block  col-12 mt-3">
                <div class="d-flex">
                    <i class="fa-solid fa-user-group" style="color: #8E52B1;"></i>
                    <h2 class="mx-3 h2-charts mb-4" style="text-align: right;">احصائيات المستخدمين والموظفين خلال ثلاث
                        اشهر</h2>
                </div>
                <div class="d-md-flex d-sm-block justify-content-between">
                    <div class="d-sm-flex d-md-block d-flex mb-3 ">
                        <div class="color"></div>
                        <h2 class="info  " id="info1"> عدد المخالفات</h2>
                        <h2 class="h2 mx-5">890</h2>
                    </div>
                    <div class="d-sm-flex d-md-block d-flex mb-3">
                        <div class="color "></div>
                        <h2 class="info " id="info1"> عدد النقاط</h2>
                        <h2 class="h2 mx-5 ">890</h2>
                    </div>
                    <div class="d-sm-flex d-md-block d-flex mb-3">
                        <div class="color"></div>
                        <h2 class="info " id="info1"> عدد المفتشين</h2>
                        <h2 class="h2 mx-5">890</h2>
                   
                </div>
                </div>
        </div>
    </div> </div>
    <div class=" container col-11 d-flex justify-content-between" style="background-color: transparent;">
    <div class="  col-12  mt-2" style="background-color: #ffffff; border-radius: 20px;" dir="rtl">
            <div class="d-block  col-12 mt-3 ">
                <div class="d-flex ">
                    <i class="fa-solid fa-user-group" style="color: #8E52B1;"></i>
                    <h2 class="mx-3 h2-charts mb-5" style="text-align: right;">تقرير شهر اغسطس</h2>
                </div>
              <div class="d-md-flex d-sm-block justify-content-between">
                <div class="d-sm-flex d-md-block d-flex ">
                    <div class="color"></div>
                    <h2 class="info  " id="info1"> مستخدم</h2>
                    <h2 class="h2 mx-5">890</h2>
                </div>
                <div class="d-sm-flex d-md-block d-flex">
                    <div class="color"></div>
                    <h2 class="info" id="info1"> موظف</h2>
                    <h2 class=" h2 mx-5">890</h2>
           
            </div>
              </div>
        </div>
    </div>
   </div>
 </div>

    <footer class="my-2">
        <div class="footer ">
            <p>جميع الحقوق محفوظه </p>
        </div>
    </footer>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>

    <script>
        const xValues = ["الشهر الأول", "الشهر الثاني", "الشهر الثالث"];
        const employeesData = [55, 49, 44];
        const managersData = [24, 15, 30];
        const chartColors = ["#F8A723", "#274373"];

        // Create the bar chart
        new Chart("barChart", {
            type: "bar",
            data: {
                labels: xValues,
                datasets: [
                    {
                        label: "موظف",
                        backgroundColor: chartColors[0],
                        data: employeesData
                    },
                    {
                        label: "مستخدم",
                        backgroundColor: chartColors[1],
                        data: managersData
                    }
                ]
            },
            options: {
                legend: { display: true },
                title: {
                    display: true,

                },
                scales: {
                    y: {
                        beginAtZero: true
                    }
                }
            }
        });
    </script>
    <script>
        const dataValues = [25, 35, 40];
        const labels = ["عدد المخالفات", "عدد النقاط", "عدد المفتشين"];
        const pieChartColors = ["#AA1717", "#F8A723", "#274373"];

        // Create the pie chart
        const ctx = document.getElementById('myPieChart').getContext('2d');
        const myPieChart = new Chart(ctx, {
            type: 'pie',
            data: {
                labels: labels,
                datasets: [{
                    backgroundColor: pieChartColors,
                    data: dataValues
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: {
                        display: true,
                        position: 'top',
                    },
                    title: {
                        display: true,
                        text: 'تفاصيل  '
                    },
                    tooltip: {
                        callbacks: {
                            label: function (tooltipItem) {
                                return `${tooltipItem.label}: ${tooltipItem.raw}`;
                            }
                        }
                    }
                }
            }
        });

        // Update h2 elements with data
        document.getElementById('info1').innerText = `عدد المخالفات: ${dataValues[0]}`;
        document.getElementById('info2').innerText = `عدد النقاط: ${dataValues[1]}`;
        document.getElementById('info3').innerText = `عدد المفتشين: ${dataValues[2]}`;

        // Function to draw text inside the pie chart
        function drawText() {
            const chartArea = myPieChart.chartArea;
            ctx.font = '20px Almarai';
            ctx.fillStyle = '#F4F7FD'; // Text color

            // Draw text for each segment
            const angles = myPieChart.data.datasets[0].data.map((value) => value / myPieChart.data.datasets[0].data.reduce((a, b) => a + b) * 2 * Math.PI);
            let startAngle = -Math.PI / 2;

            angles.forEach((angle, index) => {
                const endAngle = startAngle + angle * 2 * Math.PI;
                const middleAngle = (startAngle + endAngle) / 2;

                const x = (chartArea.left + chartArea.right) / 2 + Math.cos(middleAngle) * 30;
                const y = (chartArea.top + chartArea.bottom) / 2 + Math.sin(middleAngle) * 100;

                ctx.fillText(`${dataValues[index]}`, x, y); // Draw the value inside the segment

                startAngle = endAngle; // Move to the next segment
            });
        }

        // Call drawText function after chart is rendered
        myPieChart.canvas.addEventListener('mouseover', drawText);
        myPieChart.canvas.addEventListener('mouseout', drawText);
        myPieChart.update(); 
    </script>

    </body>

</html>